import{r as Q,s as se,n as J,o as le}from"../chunks/scheduler.19f29636.js";import{d as ie,S as re,i as ae,g as C,s as z,h as k,j as P,y as j,c as G,f as x,k as v,a as H,x as E,A as X,z as D,m as oe,n as de,o as ce}from"../chunks/index.90f2793d.js";import{O as V}from"../chunks/OpenAPI.2cb409f5.js";import{r as q}from"../chunks/request.aecdd3a3.js";function Z(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ue(n,e){n.d(1),e.delete(n.key)}function fe(n,e,t,l,o,c,a,u,s,h,p,L){let _=n.length,d=c.length,f=_;const O={};for(;f--;)O[n[f].key]=f;const S=[],m=new Map,A=new Map,N=[];for(f=d;f--;){const i=L(o,c,f),w=t(i);let b=a.get(w);b?l&&N.push(()=>b.p(i,e)):(b=h(w,i),b.c()),m.set(w,S[f]=b),w in O&&A.set(w,Math.abs(f-O[w]))}const U=new Set,g=new Set;function M(i){ie(i,1),i.m(u,p),a.set(i.key,i),p=i.first,d--}for(;_&&d;){const i=S[d-1],w=n[_-1],b=i.key,B=w.key;i===w?(p=i.first,_--,d--):m.has(B)?!a.has(b)||U.has(b)?M(i):g.has(B)?_--:A.get(b)>A.get(B)?(g.add(b),M(i)):(U.add(B),_--):(s(w,a),_--)}for(;_--;){const i=n[_];m.has(i.key)||s(i,a)}for(;d;)M(S[d-1]);return Q(N),S}class he{static postApiEntry(e){return q(V,{method:"POST",url:"/api/entry",body:e,mediaType:"application/json"})}}class pe{static deleteApiEntry(e){return q(V,{method:"DELETE",url:"/api/entry/{entryToDeleteId}",path:{entryToDeleteId:e}})}}class ye{static getApiEntry(){return q(V,{method:"GET",url:"/api/entry"})}}class ve{static getApiEntry(e){return q(V,{method:"GET",url:"/api/entry/{entryToGetId}",path:{entryToGetId:e},errors:{404:"Not Found"}})}}class be{static postApiEntry(e,t){return q(V,{method:"POST",url:"/api/entry/{entryToUpdateId}",path:{entryToUpdateId:e},body:t,mediaType:"application/json"})}}function $(n,e,t){const l=n.slice();return l[20]=e[t],l}function ee(n,e){let t,l=e[20].title+"",o,c,a,u;function s(){return e[10](e[20])}return{key:n,first:null,c(){t=C("button"),o=oe(l),this.h()},l(h){t=k(h,"BUTTON",{id:!0,class:!0});var p=P(t);o=de(p,l),p.forEach(x),this.h()},h(){v(t,"id","singleEntryOverview"),v(t,"class",c="p-3 card bg-base-100 "+(e[20].entryId===e[2].id?"bg-gray-700":"")),this.first=t},m(h,p){H(h,t,p),E(t,o),a||(u=D(t,"click",s),a=!0)},p(h,p){e=h,p&1&&l!==(l=e[20].title+"")&&ce(o,l),p&5&&c!==(c="p-3 card bg-base-100 "+(e[20].entryId===e[2].id?"bg-gray-700":""))&&v(t,"class",c)},d(h){h&&x(t),a=!1,u()}}}function me(n){let e,t="Edit",l,o,c="Delete",a,u;return{c(){e=C("button"),e.textContent=t,l=z(),o=C("button"),o.textContent=c,this.h()},l(s){e=k(s,"BUTTON",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-179ryra"&&(e.textContent=t),l=G(s),o=k(s,"BUTTON",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-hjuw1b"&&(o.textContent=c),this.h()},h(){v(e,"class","btn btn-success w-full"),v(o,"class","btn btn-error w-full")},m(s,h){H(s,e,h),H(s,l,h),H(s,o,h),a||(u=[D(e,"click",n[5]),D(o,"click",n[9])],a=!0)},p:J,d(s){s&&(x(e),x(l),x(o)),a=!1,Q(u)}}}function we(n){let e,t="Save",l,o;return{c(){e=C("button"),e.textContent=t,this.h()},l(c){e=k(c,"BUTTON",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-1ua9rfe"&&(e.textContent=t),this.h()},h(){v(e,"class","btn btn-success w-full")},m(c,a){H(c,e,a),l||(o=D(e,"click",n[7]),l=!0)},p:J,d(c){c&&x(e),l=!1,o()}}}function _e(n){let e,t,l,o="+ New Entry",c,a,u=[],s=new Map,h,p,L="Show Content",_,d,f,O,S,m,A,N,U,g,M="Show overview",i,w,b=Z(n[0]);const B=r=>r[20].entryId;for(let r=0;r<b.length;r+=1){let y=$(n,b,r),T=B(y);s.set(T,u[r]=ee(T,y))}function W(r,y){return r[1]?we:me}let F=W(n),I=F(n);return{c(){e=C("div"),t=C("div"),l=C("button"),l.textContent=o,c=z(),a=C("div");for(let r=0;r<u.length;r+=1)u[r].c();h=z(),p=C("button"),p.textContent=L,_=z(),d=C("div"),f=C("input"),S=z(),m=C("textarea"),N=z(),I.c(),U=z(),g=C("button"),g.textContent=M,this.h()},l(r){e=k(r,"DIV",{class:!0});var y=P(e);t=k(y,"DIV",{id:!0,class:!0});var T=P(t);l=k(T,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(l)!=="svelte-o0zq7z"&&(l.textContent=o),c=G(T),a=k(T,"DIV",{id:!0,class:!0});var Y=P(a);for(let K=0;K<u.length;K+=1)u[K].l(Y);Y.forEach(x),h=G(T),p=k(T,"BUTTON",{class:!0,"data-svelte-h":!0}),j(p)!=="svelte-168rn7z"&&(p.textContent=L),T.forEach(x),_=G(y),d=k(y,"DIV",{id:!0,class:!0});var R=P(d);f=k(R,"INPUT",{type:!0,placeholder:!0,class:!0}),S=G(R),m=k(R,"TEXTAREA",{class:!0,placeholder:!0}),P(m).forEach(x),N=G(R),I.l(R),U=G(R),g=k(R,"BUTTON",{class:!0,"data-svelte-h":!0}),j(g)!=="svelte-12h4eu0"&&(g.textContent=M),R.forEach(x),y.forEach(x),this.h()},h(){v(l,"id","newEntryButton"),v(l,"class","btn btn-success sticky top-0 mb-3 z-10"),v(a,"id","entries"),v(a,"class","flex flex-col gap-3"),v(p,"class","btn btn-info w-full md:hidden sticky bottom-0"),v(t,"id",te),v(t,"class","col-span-1 flex hidden md:flex flex-col p-4 pt-0 pb-0 mt-4 overflow-y-auto max-h-full mb-10"),v(f,"type","text"),v(f,"placeholder","Title"),v(f,"class","input input-bordered w-full"),f.disabled=O=!n[1],v(m,"class","textarea textarea-bordered resize-none w-full h-4/5"),v(m,"placeholder","Text"),m.disabled=A=!n[1],v(g,"class","btn btn-info w-full md:hidden"),v(d,"id",ne),v(d,"class","flex md:flex flex-col items-center h-full gap-3 p-4 col-span-4"),v(e,"class","w-full h-full grid grid-cols-1 md:grid-cols-5 auto-cols-max overflow-hidden")},m(r,y){H(r,e,y),E(e,t),E(t,l),E(t,c),E(t,a);for(let T=0;T<u.length;T+=1)u[T]&&u[T].m(a,null);E(t,h),E(t,p),E(e,_),E(e,d),E(d,f),X(f,n[2].title),E(d,S),E(d,m),X(m,n[2].text),E(d,N),I.m(d,null),E(d,U),E(d,g),i||(w=[D(l,"click",n[8]),D(p,"click",n[4]),D(f,"input",n[11]),D(m,"input",n[12]),D(g,"click",n[3])],i=!0)},p(r,[y]){y&69&&(b=Z(r[0]),u=fe(u,y,B,1,r,b,s,a,ue,ee,null,$)),y&2&&O!==(O=!r[1])&&(f.disabled=O),y&4&&f.value!==r[2].title&&X(f,r[2].title),y&2&&A!==(A=!r[1])&&(m.disabled=A),y&4&&X(m,r[2].text),F===(F=W(r))&&I?I.p(r,y):(I.d(1),I=F(r),I&&(I.c(),I.m(d,U)))},i:J,o:J,d(r){r&&x(e);for(let y=0;y<u.length;y+=1)u[y].d();I.d(),i=!1,Q(w)}}}let te="entryOverviewSidebar",ne="entryContent";function Ee(n,e,t){let l=[],o=!0,c,a;const u={id:-1,title:"",text:"",created:""};let s=structuredClone(u);le(()=>{c=document.getElementById(te),a=document.getElementById(ne),h()});async function h(){ye.getApiEntry().then(w=>{w.sort((b,B)=>B.entryId-b.entryId),t(0,l=w)})}async function p(){c.classList.remove("hidden"),a.classList.add("hidden")}async function L(){a.classList.remove("hidden"),c.classList.add("hidden")}async function _(){t(1,o=!0)}async function d(){t(1,o=!1)}async function f(i){ve.getApiEntry(i).then(b=>{t(2,s=b)}),d()}async function O(){s.id>0?m():S()}async function S(){he.postApiEntry({title:s.title,text:s.text}).then(()=>{h(),d()})}async function m(){be.postApiEntry(s.id,{newTitle:s.title,newText:s.text}).then(()=>{h(),d()})}async function A(){t(2,s=structuredClone(u)),_()}async function N(){await pe.deleteApiEntry(s.id),t(2,s=structuredClone(u)),h()}const U=i=>f(i.entryId);function g(){s.title=this.value,t(2,s)}function M(){s.text=this.value,t(2,s)}return[l,o,s,p,L,_,f,O,A,N,U,g,M]}class xe extends re{constructor(e){super(),ae(this,e,Ee,_e,se,{})}}export{xe as component};
